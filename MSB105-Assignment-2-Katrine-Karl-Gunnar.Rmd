---
title: "Har en persons høyde innvirkning på lønnen?"
subtitle: "Assignment 2 i MSB105 Data Science - innleveringsfrist 12.10.20"
author: 
  - Katrine Hope
  - Karl-Gunnar Severinsen
classoption: twoside
fontsize: 12pt
linestretch: 1.5
output: html_notebook
---


```{r setup, echo = FALSE}
library(modelr)
library(ggplot2)
library(knitr)
library(tinytex)
library(tidyverse)
library(ggpubr)
library(dplyr)
options(scipen = 999)
```

## Introduksjon


## Analyse

### Oversikt

Vi starter med å lage en kolonne der høyden er vist i centimeter og inntekten i nnorske kroner. 
Vi gjør dette for å kunne få en bedre og mer forståelig analyse, da vi vil få en bedre forståelse ved å benytte kjente verdier. 
Deretter sorterer vi utvalget i datasettet inn i 10 intervaller med sammendragsstatistikk, for å gi en kjapp oversikt:

```{r oversikt, echo=FALSE}
heights$inntekt <- heights$income*9
heights$height_cm <- heights$height*2.54
heights$height_cmInt <- cut(heights$height_cm, breaks = 8)
kable(summary(heights[,3:7]))
kable(summary(heights[,8:11]))
```

Her ser vi statistikk på vekt (i lbs), alder, sivilstatus, kjønn og utdanning og høyde (i cm) og inntekt i NOK.

### 1-variabels analyser

Videre har vi laget noen forskjellige overikter for variablene *height_cm* og *inntekt* for å kunne vurdere om variablene er normalfordelte eller ikke. 
Vi starter med et histogram.

```{r histogram, echo=FALSE}
height_cm <- heights$height_cm
hist(height_cm, breaks = 20,
     main = "Høyde i centimeter",
     xlab = "Centimeter",
     ylab = "Frekvens",
     col = "darkmagenta")
```

I histogrammet over ser vi høyde i centimeter opp mot frekvens. 
Histogrammet reflekterer *height_cmInt* fra oversikten i forrige kapittel.
Vi kan også se at fordelingen er tilnærmet normalfordelt, med hovedvekten av observasjonene ligger mellom 160 til 180 centimeter.


```{r}
hist(height_cm, breaks = 20,
     main = "Høyde i centimeter",
     xlab = "Centimeter",
     ylab = "Frekvens",
     col = "darkmagenta")
xfit <- seq(min(height_cm), max(height_cm))
yfit <- dnorm(xfit,mean = mean(height_cm), sd = sd(height_cm))
yfit <- yfit*diff(heights$height_cm[1:2])*length(height_cm)
lines(xfit, yfit, col = "yellow", lwd = 4)
```

```{r density høyde, echo=FALSE}
ggplot(data = heights) +
  geom_density(aes(x = height_cm),
                   fill = "darkmagenta")
```

Over har vi et density plot, som i grunn viser det samme som histogrammet over, men ved hjelp av en jevn kurve som viser tettheten av observasjonene.
Igjen ser vi at fordelingen er tilnærmet normalfordelt.

Vi ønsker også å se på fordelingen i inntekt. 

```{r density inntekt, echo=FALSE}
ggplot(data = heights) +
  geom_density(aes(x = inntekt),
                   fill = "darkmagenta")
```

Her ser vi tydelig at inntekten ikke er normalfordelt.
Dette har sammenheng med at det er mange observasjoner rundt 0, samt de 2% med høyest lønn er vist ved et gjennomsnitt av deres lønn.
Dette medfører null observasjoner mellom 1.700.000 og 3.000.000, og en stor tetthet rundt 3-400.000.
Vi så også dette tidligere i oversikten, der vi får en median på 266.000 og et gjennomsnitt på 370.000.

### 2-variablers analyse

Vi har til nå sett på variablene *height_cm* og *inntekt* hver for seg.
For å kunne vurdere om de har noe sammenheng, må vi putte dem inn i samme plot.

```{r plot-height-income}
ggplot(heights, mapping = aes(x = height, y = income, col = income)) +
  geom_point()
```
Igjen ser vi at de øverste 2 prosentene ligger langt fra resten av observasjonene. 
For å kunne jobbe videre med datasettet så bør disse ekskluderes, da de bidrar til å "forstyrre". 


## Referanser


